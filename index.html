<!doctype html>
<html ng-app="appRepoBrowser">

<head>
    <script src="node_modules/angular/angular.js"></script>
    <script src="scripts/app.module.js"></script>
    <script src="scripts/app.config.js"></script>
    <script src="scripts/searchForm.directive.js"></script>
    <script src="scripts/repoDetails.directive.js"></script>
    <script src="scripts/spinner.interceptor.js"></script>
    <script src="scripts/error.interceptor.js"></script>
    <script src="scripts/rateLimit.interceptor.js"></script>
    <script src="scripts/authentication.interceptor.js"></script>
    <script src="scripts/home.controller.js"></script>
    <script src="scripts/githubapi.service.js"></script>
    <script src="scripts/rateLimit.service.js"></script>
    <script src="scripts/authenticationState.service.js"></script>
    <link rel="stylesheet" href="http://ajax.aspnetcdn.com/ajax/bootstrap/3.3.6/css/bootstrap.css">
</head>

<body>
    <div class="container" ng-controller='HomeController as vm'>

        <search-form on-submit="vm.getRepos(username)"></search-form>

        <div class="row" ng-show="vm.repos.length">
            <div class="col-md-offset-2 col-md-8">
                <hr />
                <div class="panel panel-default">
                    <div class="panel-heading">
                        GitHub Repositories
                    </div>
                    <div class="panel-body">
                        <ul class="list-group">
                            <li class="list-group-item" ng-repeat="repo in vm.repos">
                                <repo-details repo="repo"></repo-details>
                            </li>
                        </ul>
                    </div>
                </div>
                <nav class="text-center">
                    <ul class="pagination">
                        <li ng-class="{ disabled: !vm.paginationLinks.prev }">
                            <a ng-if="!vm.paginationLinks.prev">&laquo;</a>
                            <a ng-if="vm.paginationLinks.prev" href="" ng-click="vm.getReposPage(vm.paginationLinks.prevPageNumber)">&laquo;</a>
                        </li>
                        <li ng-class="{ active: paginationLink.current }" ng-repeat="paginationLink in vm.paginationLinks">
                            <a ng-if="paginationLink.current">{{ paginationLink.pageNumber }}</a>
                            <a ng-if="!paginationLink.current" href="" ng-click="vm.getReposPage(paginationLink.pageNumber)">{{ paginationLink.pageNumber }}</a>
                        </li>
                        <li ng-class="{ disabled: !vm.paginationLinks.next }">
                            <a ng-if="!vm.paginationLinks.next">&raquo;</a>
                            <a ng-if="vm.paginationLinks.next" href="" ng-click="vm.getReposPage(vm.paginationLinks.nextPageNumber)">&raquo;</a>
                        </li>
                    </ul>
                </nav>
                <div class=pull-right>
                    <i>(limit: {{ vm.rateLimit.limit }}, remaining: {{ vm.rateLimit.remaining }}, reset: {{ vm.rateLimit.reset | date:'medium' }})</i>
                </div>
            </div>
        </div>

    </div>
</body>

</html>